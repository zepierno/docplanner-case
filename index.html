<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Service Console - Docplanner Expansion Pipeline</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
        .sf-blue { background-color: #0176d3; }
        .sf-blue-dark { background-color: #014486; }
        .sf-blue-text { color: #0176d3; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .badge { display: inline-flex; align-items: center; padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; }
        .debug-panel { font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        // Mock Data
        const cases = [
            { id: 'CS-12847', subject: "Can't find video call button", clinic: 'Cl√≠nica Dental Sonrisa', type: 'expansion', size: 'small', status: 'New', created: '2 min ago', priority: 'High', nextStep: 'Auto Soft-Sell Sent' },
            { id: 'CS-12848', subject: 'Telemedicine feature not working', clinic: 'Hospital Universitario Madrid', type: 'expansion', size: 'enterprise', status: 'New', created: '5 min ago', priority: 'High', nextStep: 'Assigned to Sales' },
            { id: 'CS-12849', subject: 'How to export patient list?', clinic: 'Centro M√©dico Valencia', type: 'training', size: 'small', status: 'New', created: '12 min ago', priority: 'Medium', nextStep: 'Send Tutorial Link' },
            { id: 'CS-12850', subject: 'Calendar sync error with Google', clinic: 'Fisioterapia Barcelona', type: 'bug', size: 'small', status: 'New', created: '18 min ago', priority: 'High', nextStep: 'Escalate to Tech' },
            { id: 'CS-12851', subject: 'Need help setting up appointments', clinic: 'Cl√≠nica Oftalmol√≥gica Sur', type: 'reonboarding', size: 'small', status: 'New', created: '25 min ago', priority: 'Medium', nextStep: 'Schedule Re-onboarding' },
            { id: 'CS-12852', subject: 'General question about pricing', clinic: 'Dentista Plus', type: 'general', size: 'small', status: 'New', created: '30 min ago', priority: 'Low', nextStep: 'Standard Reply' },
        ];

        const leads = [
            { id: 'LD-5521', clinic: 'Cl√≠nica Dental Sonrisa', contact: 'Dr. Carlos Mendoza', email: 'carlos.mendoza@dentalsonrisa.es', value: '‚Ç¨2,400/yr', status: 'New', source: 'Support Expansion Signal', assigned: 'Auto-assigned', created: '2 min ago', converted: false },
            { id: 'LD-5520', clinic: 'Hospital Universitario Madrid', contact: 'Dr. Elena Ruiz', email: 'elena.ruiz@hum.es', value: '‚Ç¨48,000/yr', status: 'Qualified', source: 'Support Expansion Signal', assigned: 'Mar√≠a Gonz√°lez', created: '5 min ago', converted: true },
            { id: 'LD-5519', clinic: 'Centro Wellness Sevilla', contact: 'Dr. Pablo Torres', email: 'pablo.torres@wellness-sevilla.es', value: '‚Ç¨3,600/yr', status: 'Contacted', source: 'Support Expansion Signal', assigned: 'Auto-assigned', created: '1 hour ago', converted: false },
        ];

        const opportunities = [
            { id: 'OPP-2847', clinic: 'Hospital Universitario Madrid', contact: 'Dr. Elena Ruiz', value: '‚Ç¨48,000/yr', stage: 'Qualification', probability: '75%', closeDate: 'Mar 15, 2026', source: 'Support Signal', owner: 'Mar√≠a Gonz√°lez', leadId: 'LD-5520', caseId: 'CS-12848' },
            { id: 'OPP-2839', clinic: 'Cl√≠nica Premium Barcelona', contact: 'Dr. Mart√≠n √Ålvarez', value: '‚Ç¨12,000/yr', stage: 'Proposal', probability: '60%', closeDate: 'Feb 28, 2026', source: 'Support Signal', owner: 'Carlos Ruiz', leadId: 'LD-5512', caseId: 'CS-12801' },
            { id: 'OPP-2831', clinic: 'Red Salud Valencia', contact: 'Dra. Ana Moreno', value: '‚Ç¨24,000/yr', stage: 'Negotiation', probability: '85%', closeDate: 'Feb 10, 2026', source: 'Support Signal', owner: 'Mar√≠a Gonz√°lez', leadId: 'LD-5498', caseId: 'CS-12756' },
        ];

        // Helper functions
        const getTypeConfig = (type) => {
            const configs = {
                expansion: { label: 'Expansion Opportunity', color: 'bg-emerald-500', icon: 'üéØ', textColor: 'text-emerald-700', bgLight: 'bg-emerald-50', borderColor: 'border-emerald-500' },
                training: { label: 'Training Issue', color: 'bg-blue-500', icon: 'üìö', textColor: 'text-blue-700', bgLight: 'bg-blue-50', borderColor: 'border-blue-500' },
                bug: { label: 'Bug / Technical', color: 'bg-red-500', icon: 'üêõ', textColor: 'text-red-700', bgLight: 'bg-red-50', borderColor: 'border-red-500' },
                reonboarding: { label: 'Re-onboarding Needed', color: 'bg-amber-500', icon: 'üîÑ', textColor: 'text-amber-700', bgLight: 'bg-amber-50', borderColor: 'border-amber-500' },
                general: { label: 'General Inquiry', color: 'bg-slate-500', icon: 'üí¨', textColor: 'text-slate-700', bgLight: 'bg-slate-50', borderColor: 'border-slate-500' },
            };
            return configs[type];
        };

        const getPriorityColor = (priority) => {
            const colors = { High: 'text-red-600', Medium: 'text-amber-600', Low: 'text-slate-500' };
            return colors[priority] || 'text-slate-500';
        };

        const getNextStepStyle = (type) => {
            const styles = {
                expansion: 'bg-emerald-100 text-emerald-800',
                training: 'bg-blue-100 text-blue-800',
                bug: 'bg-red-100 text-red-800',
                reonboarding: 'bg-amber-100 text-amber-800',
                general: 'bg-slate-100 text-slate-800',
            };
            return styles[type] || 'bg-slate-100 text-slate-800';
        };

        const getStageStyle = (stage) => {
            const styles = {
                'Qualification': 'bg-blue-50 text-blue-700 border-blue-200',
                'Proposal': 'bg-amber-50 text-amber-700 border-amber-200',
                'Negotiation': 'bg-emerald-50 text-emerald-700 border-emerald-200',
            };
            return styles[stage] || 'bg-slate-50 text-slate-700 border-slate-200';
        };

        // Header Component
        const SalesforceHeader = ({ currentView, setCurrentView }) => (
            <header className="sf-blue text-white shadow-lg">
                <div className="flex items-center justify-between px-4 py-3">
                    <div className="flex items-center gap-6">
                        <div className="flex items-center gap-3">
                            <div className="w-9 h-9 bg-white rounded flex items-center justify-center shadow">
                                <span className="sf-blue-text font-bold text-sm">SF</span>
                            </div>
                            <div>
                                <span className="font-semibold text-lg">Service Console</span>
                                <span className="text-blue-200 text-sm ml-2">| Docplanner</span>
                            </div>
                        </div>
                        <nav className="flex gap-1 ml-4">
                            {[
                                { key: 'cases', label: 'Cases' },
                                { key: 'leads', label: 'Leads' },
                                { key: 'opportunities', label: 'Opportunities' }
                            ].map((item) => (
                                <button 
                                    key={item.key}
                                    onClick={() => setCurrentView(item.key)}
                                    className={`px-5 py-2 rounded-t text-sm font-medium transition-all ${
                                        (currentView.startsWith('case') && item.key === 'cases') || 
                                        (currentView.startsWith('lead') && item.key === 'leads') ||
                                        (currentView.startsWith('opportunit') && item.key === 'opportunities') ||
                                        currentView === item.key
                                            ? 'bg-white text-blue-700 shadow' 
                                            : 'hover:bg-blue-600 text-blue-100'
                                    }`}
                                >
                                    {item.label}
                                </button>
                            ))}
                        </nav>
                    </div>
                    <div className="flex items-center gap-4">
                        <div className="relative">
                            <input 
                                type="text" 
                                placeholder="Search Salesforce..." 
                                className="w-72 px-4 py-2 rounded-lg bg-blue-600 text-white placeholder-blue-200 text-sm focus:outline-none focus:ring-2 focus:ring-white border border-blue-400"
                            />
                            <span className="absolute right-3 top-2.5 text-blue-200">üîç</span>
                        </div>
                        <div className="flex items-center gap-3">
                            <button className="text-blue-200 hover:text-white">üîî</button>
                            <div className="w-9 h-9 bg-orange-400 rounded-full flex items-center justify-center text-sm font-semibold shadow">AG</div>
                        </div>
                    </div>
                </div>
            </header>
        );

        // AI Classification Banner
        const AIClassificationBanner = ({ type, confidence, size }) => {
            const config = getTypeConfig(type);
            if (type !== 'expansion') return null;
            
            return (
                <div className={`${config.bgLight} border-l-4 ${config.borderColor} p-4 rounded-r-lg mb-4 animate-fade-in shadow-sm`}>
                    <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                            <span className="text-3xl">{config.icon}</span>
                            <div>
                                <div className="flex items-center gap-3">
                                    <span className={`font-bold text-lg ${config.textColor}`}>{config.label}</span>
                                    <span className="badge bg-emerald-600 text-white">AI Confidence: {confidence}%</span>
                                </div>
                                <p className="text-sm text-slate-600 mt-1">
                                    {size === 'small' 
                                        ? '‚ú® Small clinic detected ‚Üí Automated soft-sell flow triggered'
                                        : 'üè¢ Enterprise account detected ‚Üí Lead created for Sales team'
                                    }
                                </p>
                            </div>
                        </div>
                        <div className="flex items-center gap-2">
                            {size === 'small' ? (
                                <span className="badge bg-blue-100 text-blue-800">‚úâÔ∏è Auto-reply Sent</span>
                            ) : (
                                <span className="badge bg-purple-100 text-purple-800">üë§ Assigned to Sales</span>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // Expansion Triggers Component
        const ExpansionTriggers = ({ triggers }) => (
            <div className="bg-white rounded-lg shadow-sm border mb-4 animate-fade-in">
                <div className="px-4 py-3 border-b bg-slate-50">
                    <h3 className="text-sm font-semibold text-slate-700 flex items-center gap-2">
                        <span>‚ö°</span> Expansion Triggers Analysis
                    </h3>
                </div>
                <div className="p-4">
                    <div className="grid grid-cols-2 gap-2">
                        {triggers.map((trigger, i) => (
                            <div key={i} className={`flex items-center gap-2 p-3 rounded-lg ${trigger.met ? 'bg-emerald-50 border border-emerald-200' : 'bg-red-50 border border-red-200'}`}>
                                <span className={`text-lg ${trigger.met ? 'text-emerald-600' : 'text-red-500'}`}>{trigger.met ? '‚úì' : '‚úó'}</span>
                                <span className="text-sm font-medium">{trigger.label}</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        // AI Debug Panel
        const AIDebugPanel = ({ isSmall }) => {
            const [isExpanded, setIsExpanded] = useState(false);
            
            const jsonOutput = {
                intent: "expansion",
                product: "premium_suite",
                confidence: 0.94,
                action: isSmall ? "auto_softsell" : "sales_handoff",
                triggers_met: 6,
                triggers_total: 6
            };

            return (
                <div className="bg-slate-800 rounded-lg shadow-sm border border-slate-700 mb-4 animate-fade-in overflow-hidden">
                    <button 
                        onClick={() => setIsExpanded(!isExpanded)}
                        className="w-full px-4 py-3 flex items-center justify-between bg-slate-900 hover:bg-slate-800 transition-colors"
                    >
                        <div className="flex items-center gap-3">
                            <span className="text-amber-400">‚öôÔ∏è</span>
                            <span className="text-sm font-semibold text-slate-300">AI Classification Debug Output</span>
                            <span className="badge bg-amber-900/50 text-amber-400 text-xs border border-amber-700">For Development Reference Only</span>
                        </div>
                        <span className="text-slate-400 text-sm">{isExpanded ? '‚ñº Hide' : '‚ñ∂ Show'}</span>
                    </button>
                    
                    {isExpanded && (
                        <div className="p-4 debug-panel">
                            <div className="flex items-start gap-3 mb-3">
                                <span className="text-amber-400 text-xs mt-1">‚ÑπÔ∏è</span>
                                <p className="text-xs text-slate-400">
                                    This panel shows the structured JSON output from the AI classification system. 
                                    Used for auditing, debugging, and ensuring decision transparency.
                                </p>
                            </div>
                            <pre className="text-xs text-emerald-400 bg-slate-950 p-3 rounded border border-slate-700 overflow-x-auto">
{`// AI Classification Response
{
  "intent": "${jsonOutput.intent}",
  "product": "${jsonOutput.product}",
  "confidence": ${jsonOutput.confidence},
  "action": "${jsonOutput.action}",
  "triggers_met": ${jsonOutput.triggers_met},
  "triggers_total": ${jsonOutput.triggers_total}
}`}
                            </pre>
                        </div>
                    )}
                </div>
            );
        };

        // Auto Reply Preview
        const AutoReplyPreview = ({ size }) => {
            const smallClinicReply = `Dear Dr. Mendoza,

Thank you for reaching out! I understand you're looking for video consultation capabilities.

Great news! Video consultations are available with our Premium Suite, which includes:
‚úì HD Video Calls with patients
‚úì Screen sharing for test results
‚úì Automatic appointment reminders
‚úì Recording capabilities (with consent)

Based on your clinic's profile, you'd be eligible for a special upgrade offer.

Would you like me to send you more details about the Premium Suite? You can also start a 14-day free trial directly from your dashboard.

Best regards,
Docplanner Support Team`;

            const enterpriseReply = `Dear Dr. Ruiz,

Thank you for contacting us. I understand you're interested in telemedicine features for Hospital Universitario Madrid.

I've connected you with Mar√≠a Gonz√°lez from our Enterprise Solutions team, who specializes in healthcare institutions of your scale. She will reach out within the next 2 hours to discuss:

‚Ä¢ Custom telemedicine implementation
‚Ä¢ Integration with your existing systems
‚Ä¢ Volume-based pricing for 50+ practitioners
‚Ä¢ Dedicated support and training

In the meantime, I'm happy to answer any immediate questions.

Best regards,
Docplanner Support Team`;

            return (
                <div className="bg-white rounded-lg shadow-sm border mb-4 animate-fade-in">
                    <div className="px-4 py-3 border-b bg-blue-50">
                        <h3 className="text-sm font-semibold text-blue-800 flex items-center gap-2">
                            <span>‚úâÔ∏è</span> {size === 'small' ? 'Auto-Reply Sent to Customer' : 'Notification Sent to Customer'}
                        </h3>
                    </div>
                    <div className="p-4">
                        <pre className="text-xs bg-slate-50 p-4 rounded-lg whitespace-pre-wrap font-sans text-slate-700 max-h-56 overflow-y-auto border">
                            {size === 'small' ? smallClinicReply : enterpriseReply}
                        </pre>
                    </div>
                </div>
            );
        };

        // Cases List Component
        const CasesList = ({ onSelectCase }) => (
            <div className="p-6 animate-fade-in">
                <div className="flex items-center justify-between mb-6">
                    <div>
                        <h1 className="text-2xl font-bold text-slate-800">Cases</h1>
                        <p className="text-slate-500">Support queue with AI classification</p>
                    </div>
                    <div className="flex gap-2">
                        <span className="badge bg-emerald-50 text-emerald-700 border border-emerald-200">üéØ Expansion: 2</span>
                        <span className="badge bg-blue-50 text-blue-700 border border-blue-200">üìö Training: 1</span>
                        <span className="badge bg-red-50 text-red-700 border border-red-200">üêõ Bug: 1</span>
                        <span className="badge bg-amber-50 text-amber-700 border border-amber-200">üîÑ Re-onboard: 1</span>
                    </div>
                </div>
                
                <div className="bg-white rounded-lg shadow-sm border overflow-hidden">
                    <table className="w-full">
                        <thead className="bg-slate-50 border-b">
                            <tr>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Case #</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Subject</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Account</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">AI Classification</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Priority</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Next Step</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Created</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {cases.map((c, idx) => {
                                const typeConfig = getTypeConfig(c.type);
                                return (
                                    <tr key={c.id} className={`border-b hover:bg-blue-50 transition-colors cursor-pointer ${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}`}>
                                        <td className="p-4">
                                            <button 
                                                onClick={() => c.type === 'expansion' && onSelectCase(c.size)}
                                                className="sf-blue-text hover:underline font-semibold"
                                            >
                                                {c.id}
                                            </button>
                                        </td>
                                        <td className="p-4 text-sm text-slate-700 font-medium">{c.subject}</td>
                                        <td className="p-4 text-sm text-slate-600">{c.clinic}</td>
                                        <td className="p-4">
                                            <div className="flex items-center gap-2">
                                                <div className={`w-2.5 h-2.5 rounded-full ${typeConfig.color}`}></div>
                                                <span className={`text-sm font-medium ${typeConfig.textColor}`}>{typeConfig.icon} {typeConfig.label}</span>
                                            </div>
                                        </td>
                                        <td className="p-4">
                                            <span className={`text-sm font-semibold ${getPriorityColor(c.priority)}`}>{c.priority}</span>
                                        </td>
                                        <td className="p-4">
                                            <span className={`badge ${getNextStepStyle(c.type)} text-xs`}>
                                                {c.nextStep}
                                            </span>
                                        </td>
                                        <td className="p-4 text-sm text-slate-500">{c.created}</td>
                                        <td className="p-4">
                                            <button 
                                                onClick={() => c.type === 'expansion' && onSelectCase(c.size)}
                                                className="px-3 py-1.5 text-xs font-medium sf-blue text-white rounded hover:bg-blue-700 transition-colors"
                                            >
                                                Open
                                            </button>
                                        </td>
                                    </tr>
                                );
                            })}
                        </tbody>
                    </table>
                </div>
                
                <div className="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                    <p className="text-sm text-amber-800">
                        <strong>üí° Demo Tip:</strong> Click on <strong>CS-12847</strong> (small clinic) or <strong>CS-12848</strong> (enterprise) to see the AI-powered expansion detection in action!
                    </p>
                </div>
            </div>
        );

        // Case Detail Component
        const CaseDetail = ({ size, onBack, onViewLead }) => {
            const isSmall = size === 'small';
            const caseData = isSmall ? cases[0] : cases[1];
            
            const clinicInfo = isSmall ? {
                name: 'Cl√≠nica Dental Sonrisa',
                contact: 'Dr. Carlos Mendoza',
                email: 'carlos.mendoza@dentalsonrisa.es',
                phone: '+34 612 345 678',
                plan: 'Basic',
                practitioners: '2',
                customerSince: 'March 2023',
                onboardingStatus: 'Completed',
                engagement: 85,
                lastLogin: '2 hours ago',
            } : {
                name: 'Hospital Universitario Madrid',
                contact: 'Dr. Elena Ruiz (Head of Digital)',
                email: 'elena.ruiz@hum.es',
                phone: '+34 910 123 456',
                plan: 'Basic',
                practitioners: '127',
                customerSince: 'January 2022',
                onboardingStatus: 'Completed',
                engagement: 92,
                lastLogin: '30 min ago',
            };
            
            const triggers = [
                { label: 'Not on Premium plan', met: true },
                { label: 'Onboarding completed', met: true },
                { label: 'High engagement score (>70%)', met: clinicInfo.engagement > 70 },
                { label: 'No active incidents', met: true },
                { label: 'Feature request intent detected', met: true },
                { label: 'Account in good standing', met: true },
            ];

            return (
                <div className="p-6 animate-fade-in">
                    <div className="flex items-center gap-3 mb-4">
                        <button onClick={onBack} className="flex items-center gap-1 text-slate-600 hover:text-slate-800 font-medium">
                            ‚Üê Back to Cases
                        </button>
                        <span className="text-slate-300">|</span>
                        <span className="text-slate-500 text-sm">Case {caseData.id}</span>
                        <span className="badge bg-blue-100 text-blue-700">Open</span>
                    </div>
                    
                    <AIClassificationBanner type="expansion" confidence={94} size={size} />
                    
                    <div className="grid grid-cols-3 gap-6">
                        {/* Main Content */}
                        <div className="col-span-2 space-y-4">
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b">
                                    <h2 className="text-lg font-semibold text-slate-800">{caseData.subject}</h2>
                                </div>
                                <div className="p-4">
                                    <div className="bg-slate-50 p-4 rounded-lg border">
                                        <p className="text-sm text-slate-600 mb-1"><strong>From:</strong> {clinicInfo.contact} &lt;{clinicInfo.email}&gt;</p>
                                        <p className="text-sm text-slate-600 mb-3"><strong>Received:</strong> {caseData.created}</p>
                                        <hr className="my-3" />
                                        <p className="text-slate-700 leading-relaxed">
                                            {isSmall 
                                                ? "Hello, I'm trying to do a video call with a patient but I can't find the button anywhere in the dashboard. I've looked in the appointments section and the patient profile but there's no video option. Can you help me? We have several patients who would prefer remote consultations."
                                                : "Hi, we're looking to implement telemedicine capabilities across our hospital departments. We currently use your platform for appointment scheduling but need video consultation features for our 127 practitioners. Can you provide information about enterprise video solutions and integration with our existing hospital systems?"
                                            }
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <ExpansionTriggers triggers={triggers} />
                            
                            <AutoReplyPreview size={size} />
                            
                            {!isSmall && (
                                <div className="bg-purple-50 rounded-lg shadow-sm border border-purple-200 animate-fade-in">
                                    <div className="px-4 py-3 border-b border-purple-200">
                                        <h3 className="text-sm font-semibold text-purple-800 flex items-center gap-2">
                                            <span>üîî</span> Sales Notification Sent
                                        </h3>
                                    </div>
                                    <div className="p-4">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <p className="text-sm text-purple-700">Lead <strong>LD-5520</strong> created and assigned to <strong>Mar√≠a Gonz√°lez</strong></p>
                                                <p className="text-xs text-purple-600 mt-1">Estimated deal value: ‚Ç¨48,000/year</p>
                                            </div>
                                            <button onClick={onViewLead} className="px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded hover:bg-purple-700 transition-colors">
                                                View Lead ‚Üí
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            <AIDebugPanel isSmall={isSmall} />
                        </div>
                        
                        {/* Sidebar */}
                        <div className="space-y-4">
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b bg-slate-50">
                                    <h3 className="text-sm font-semibold text-slate-700">Account Information</h3>
                                </div>
                                <div className="p-4 space-y-3 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Account</span>
                                        <span className="font-medium sf-blue-text">{clinicInfo.name}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Contact</span>
                                        <span className="text-right">{clinicInfo.contact}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Current Plan</span>
                                        <span className="badge bg-slate-100 text-slate-700">{clinicInfo.plan}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Practitioners</span>
                                        <span className="font-semibold">{clinicInfo.practitioners}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Customer Since</span>
                                        <span>{clinicInfo.customerSince}</span>
                                    </div>
                                    <hr />
                                    <div className="flex justify-between items-center">
                                        <span className="text-slate-500">Onboarding</span>
                                        <span className="badge bg-emerald-100 text-emerald-800">{clinicInfo.onboardingStatus}</span>
                                    </div>
                                    <div>
                                        <div className="flex justify-between mb-1">
                                            <span className="text-slate-500">Engagement Score</span>
                                            <span className="font-semibold text-emerald-600">{clinicInfo.engagement}%</span>
                                        </div>
                                        <div className="w-full bg-slate-200 rounded-full h-2">
                                            <div className="bg-emerald-500 h-2 rounded-full transition-all" style={{width: `${clinicInfo.engagement}%`}}></div>
                                        </div>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Last Login</span>
                                        <span>{clinicInfo.lastLogin}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b bg-slate-50">
                                    <h3 className="text-sm font-semibold text-slate-700">ü§ñ AI Analysis Summary</h3>
                                </div>
                                <div className="p-4 space-y-3">
                                    <div className="p-3 bg-slate-50 rounded-lg">
                                        <span className="text-xs text-slate-500 uppercase">Intent Detected</span>
                                        <p className="font-semibold text-emerald-700">Feature Request - Video Consultation</p>
                                    </div>
                                    <div className="p-3 bg-slate-50 rounded-lg">
                                        <span className="text-xs text-slate-500 uppercase">Recommended Action</span>
                                        <p className="font-semibold">{isSmall ? 'Automated Soft-Sell' : 'Sales Handoff'}</p>
                                    </div>
                                    <div className="p-3 bg-slate-50 rounded-lg">
                                        <span className="text-xs text-slate-500 uppercase">Confidence Score</span>
                                        <p className="font-semibold text-emerald-600">94%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Lead Detail Component
        const LeadDetail = ({ onBack, onViewOpportunity }) => {
            const lead = leads[1]; // Hospital Universitario Madrid
            
            return (
                <div className="p-6 animate-fade-in">
                    <div className="flex items-center gap-3 mb-6">
                        <button onClick={onBack} className="flex items-center gap-1 text-slate-600 hover:text-slate-800 font-medium">
                            ‚Üê Back to Leads
                        </button>
                        <span className="text-slate-300">|</span>
                        <span className="text-slate-500 text-sm">Lead {lead.id}</span>
                        <span className="badge bg-emerald-100 text-emerald-700">Qualified</span>
                    </div>
                    
                    <div className="grid grid-cols-3 gap-6">
                        <div className="col-span-2 space-y-4">
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b flex items-center justify-between">
                                    <h2 className="text-xl font-bold text-slate-800">{lead.clinic}</h2>
                                    <span className="badge bg-purple-100 text-purple-800">{lead.source}</span>
                                </div>
                                <div className="p-4">
                                    <div className="grid grid-cols-2 gap-4 mb-6">
                                        <div className="p-4 bg-emerald-50 rounded-lg border border-emerald-200">
                                            <p className="text-2xl font-bold text-emerald-600">{lead.value}</p>
                                            <p className="text-sm text-slate-500">Estimated Annual Value</p>
                                        </div>
                                        <div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                            <p className="text-2xl font-bold sf-blue-text">127</p>
                                            <p className="text-sm text-slate-500">Practitioners</p>
                                        </div>
                                    </div>
                                    
                                    <hr className="my-4" />
                                    
                                    <div className="space-y-3">
                                        <h3 className="font-semibold text-slate-700">üìã Lead History</h3>
                                        <div className="space-y-3 ml-2">
                                            <div className="flex items-start gap-3">
                                                <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5"></div>
                                                <div>
                                                    <p className="text-sm font-medium text-slate-700">Created from Support Case CS-12848</p>
                                                    <p className="text-xs text-slate-500">Today, 10:15 AM - AI Classification: Expansion Opportunity (94%)</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start gap-3">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5"></div>
                                                <div>
                                                    <p className="text-sm font-medium text-slate-700">Auto-assigned to Mar√≠a Gonz√°lez (Enterprise Sales)</p>
                                                    <p className="text-xs text-slate-500">Today, 10:15 AM - Based on account size and region</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start gap-3">
                                                <div className="w-3 h-3 rounded-full bg-emerald-500 mt-1.5"></div>
                                                <div>
                                                    <p className="text-sm font-medium text-slate-700">Lead qualified by Sales</p>
                                                    <p className="text-xs text-slate-500">Today, 11:30 AM - Ready for conversion</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-blue-50 rounded-lg shadow-sm border border-blue-200">
                                <div className="px-4 py-3 border-b border-blue-200">
                                    <h3 className="text-sm font-semibold text-blue-800 flex items-center gap-2">
                                        <span>üí¨</span> Original Support Request
                                    </h3>
                                </div>
                                <div className="p-4">
                                    <p className="text-sm text-slate-700 italic">
                                        "Hi, we're looking to implement telemedicine capabilities across our hospital departments. We currently use your platform for appointment scheduling but need video consultation features for our 127 practitioners..."
                                    </p>
                                    <p className="text-xs text-slate-500 mt-2">From Case CS-12848 ‚Ä¢ Received 5 min ago</p>
                                </div>
                            </div>
                            
                            <div className="flex gap-3">
                                <button 
                                    onClick={onViewOpportunity}
                                    className="flex-1 px-4 py-3 bg-emerald-600 text-white font-medium rounded-lg hover:bg-emerald-700 transition-colors"
                                >
                                    ‚úì Convert to Opportunity
                                </button>
                                <button className="px-4 py-3 bg-slate-200 text-slate-700 font-medium rounded-lg hover:bg-slate-300 transition-colors">
                                    Schedule Call
                                </button>
                            </div>
                        </div>
                        
                        {/* Sidebar */}
                        <div className="space-y-4">
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b bg-slate-50">
                                    <h3 className="text-sm font-semibold text-slate-700">Contact Information</h3>
                                </div>
                                <div className="p-4 space-y-3 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Name</span>
                                        <span className="font-medium">{lead.contact}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Email</span>
                                        <span className="sf-blue-text">{lead.email}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Phone</span>
                                        <span>+34 910 123 456</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Role</span>
                                        <span>Head of Digital</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-white rounded-lg shadow-sm border">
                                <div className="px-4 py-3 border-b bg-slate-50">
                                    <h3 className="text-sm font-semibold text-slate-700">Lead Details</h3>
                                </div>
                                <div className="p-4 space-y-3 text-sm">
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Status</span>
                                        <span className="badge bg-emerald-100 text-emerald-700">Qualified</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Owner</span>
                                        <span>Mar√≠a Gonz√°lez</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Source</span>
                                        <span className="badge bg-purple-100 text-purple-800 text-xs">Support Signal</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Original Case</span>
                                        <span className="sf-blue-text">CS-12848</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-slate-500">Created</span>
                                        <span>{lead.created}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Leads List Component
        const LeadsList = ({ onSelectLead, onViewOpportunity }) => (
            <div className="p-6 animate-fade-in">
                <div className="flex items-center justify-between mb-6">
                    <div>
                        <h1 className="text-2xl font-bold text-slate-800">Leads</h1>
                        <p className="text-slate-500">Expansion opportunities from Support signals</p>
                    </div>
                    <span className="badge bg-emerald-100 text-emerald-800 border border-emerald-200 px-3 py-1">
                        ‚ú® 3 New from Support this week
                    </span>
                </div>
                
                <div className="bg-white rounded-lg shadow-sm border overflow-hidden">
                    <table className="w-full">
                        <thead className="bg-slate-50 border-b">
                            <tr>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Lead #</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Account</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Contact</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Est. Value</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Status</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Source</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Assigned To</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {leads.map((lead, idx) => (
                                <tr key={lead.id} className={`border-b hover:bg-blue-50 transition-colors ${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}`}>
                                    <td className="p-4">
                                        <button 
                                            className="sf-blue-text hover:underline font-semibold" 
                                            onClick={() => lead.id === 'LD-5520' ? onSelectLead() : null}
                                        >
                                            {lead.id}
                                        </button>
                                    </td>
                                    <td className="p-4 text-sm text-slate-700 font-medium">{lead.clinic}</td>
                                    <td className="p-4 text-sm text-slate-600">{lead.contact}</td>
                                    <td className="p-4 text-sm font-bold text-emerald-700">{lead.value}</td>
                                    <td className="p-4">
                                        <span className={`badge ${
                                            lead.status === 'New' ? 'bg-blue-50 text-blue-700 border border-blue-200' :
                                            lead.status === 'Qualified' ? 'bg-emerald-50 text-emerald-700 border border-emerald-200' :
                                            'bg-amber-50 text-amber-700 border border-amber-200'
                                        }`}>
                                            {lead.status}
                                        </span>
                                    </td>
                                    <td className="p-4">
                                        <span className="badge bg-purple-100 text-purple-800 text-xs">
                                            {lead.source}
                                        </span>
                                    </td>
                                    <td className="p-4 text-sm text-slate-600">{lead.assigned}</td>
                                    <td className="p-4">
                                        {lead.converted ? (
                                            <button 
                                                onClick={onViewOpportunity} 
                                                className="px-3 py-1.5 text-xs font-medium bg-emerald-600 text-white rounded hover:bg-emerald-700 transition-colors"
                                            >
                                                View Opp
                                            </button>
                                        ) : (
                                            <button className="px-3 py-1.5 text-xs font-medium sf-blue text-white rounded hover:bg-blue-700 transition-colors">
                                                {lead.status === 'New' ? 'Qualify' : 'Follow Up'}
                                            </button>
                                        )}
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <p className="text-sm text-blue-800">
                        <strong>üí° Note:</strong> Only <strong>LD-5520 (Hospital Universitario Madrid)</strong> has been converted to an Opportunity. Click on it to see the full lead details, or click "View Opp" to see the converted opportunity.
                    </p>
                </div>
            </div>
        );

        // Opportunities List Component (NEW)
        const OpportunitiesList = ({ onSelectOpportunity }) => (
            <div className="p-6 animate-fade-in">
                <div className="flex items-center justify-between mb-6">
                    <div>
                        <h1 className="text-2xl font-bold text-slate-800">Opportunities</h1>
                        <p className="text-slate-500">Pipeline from Support expansion signals</p>
                    </div>
                    <div className="flex items-center gap-3">
                        <div className="text-right">
                            <p className="text-2xl font-bold text-emerald-600">‚Ç¨84,000</p>
                            <p className="text-xs text-slate-500">Total Pipeline Value</p>
                        </div>
                    </div>
                </div>
                
                <div className="bg-white rounded-lg shadow-sm border overflow-hidden">
                    <table className="w-full">
                        <thead className="bg-slate-50 border-b">
                            <tr>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Opp #</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Account</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Contact</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Value</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Stage</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Probability</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Close Date</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Owner</th>
                                <th className="text-left p-4 text-xs font-semibold text-slate-600 uppercase tracking-wide">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {opportunities.map((opp, idx) => (
                                <tr key={opp.id} className={`border-b hover:bg-blue-50 transition-colors ${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50/50'}`}>
                                    <td className="p-4">
                                        <button 
                                            className="sf-blue-text hover:underline font-semibold" 
                                            onClick={() => opp.id === 'OPP-2847' && onSelectOpportunity()}
                                        >
                                            {opp.id}
                                        </button>
                                    </td>
                                    <td className="p-4 text-sm text-slate-700 font-medium">{opp.clinic}</td>
                                    <td className="p-4 text-sm text-slate-600">{opp.contact}</td>
                                    <td className="p-4 text-sm font-bold text-emerald-700">{opp.value}</td>
                                    <td className="p-4">
                                        <span className={`badge border ${getStageStyle(opp.stage)}`}>
                                            {opp.stage}
                                        </span>
                                    </td>
                                    <td className="p-4 text-sm font-semibold text-slate-700">{opp.probability}</td>
                                    <td className="p-4 text-sm text-slate-600">{opp.closeDate}</td>
                                    <td className="p-4 text-sm text-slate-600">{opp.owner}</td>
                                    <td className="p-4">
                                        <button 
                                            onClick={() => opp.id === 'OPP-2847' && onSelectOpportunity()}
                                            className="px-3 py-1.5 text-xs font-medium sf-blue text-white rounded hover:bg-blue-700 transition-colors"
                                        >
                                            View
                                        </button>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="mt-6 grid grid-cols-3 gap-4">
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div className="flex items-center gap-2 mb-1">
                            <div className="w-3 h-3 rounded-full bg-blue-500"></div>
                            <span className="text-sm font-semibold text-blue-800">Qualification</span>
                        </div>
                        <p className="text-2xl font-bold text-blue-700">‚Ç¨48,000</p>
                        <p className="text-xs text-slate-500">1 opportunity</p>
                    </div>
                    <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
                        <div className="flex items-center gap-2 mb-1">
                            <div className="w-3 h-3 rounded-full bg-amber-500"></div>
                            <span className="text-sm font-semibold text-amber-800">Proposal</span>
                        </div>
                        <p className="text-2xl font-bold text-amber-700">‚Ç¨12,000</p>
                        <p className="text-xs text-slate-500">1 opportunity</p>
                    </div>
                    <div className="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                        <div className="flex items-center gap-2 mb-1">
                            <div className="w-3 h-3 rounded-full bg-emerald-500"></div>
                            <span className="text-sm font-semibold text-emerald-800">Negotiation</span>
                        </div>
                        <p className="text-2xl font-bold text-emerald-700">‚Ç¨24,000</p>
                        <p className="text-xs text-slate-500">1 opportunity</p>
                    </div>
                </div>
                
                <div className="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
                    <p className="text-sm text-purple-800">
                        <strong>üéØ Pipeline Insight:</strong> All 3 opportunities originated from Support tickets flagged as expansion signals. Click on <strong>OPP-2847</strong> to see the complete journey from case to opportunity.
                    </p>
                </div>
            </div>
        );

        // Opportunity Detail Component
        const OpportunityDetail = ({ onBack }) => (
            <div className="p-6 animate-fade-in">
                <div className="flex items-center gap-3 mb-6">
                    <button onClick={onBack} className="flex items-center gap-1 text-slate-600 hover:text-slate-800 font-medium">
                        ‚Üê Back to Opportunities
                    </button>
                    <span className="text-slate-300">|</span>
                    <span className="text-slate-500 text-sm">Opportunity OPP-2847</span>
                    <span className="badge bg-emerald-100 text-emerald-700">Qualification</span>
                </div>
                
                <div className="grid grid-cols-3 gap-6">
                    <div className="col-span-2 space-y-4">
                        <div className="bg-white rounded-lg shadow-sm border">
                            <div className="px-4 py-3 border-b flex items-center justify-between">
                                <h2 className="text-xl font-bold text-slate-800">Hospital Universitario Madrid - Premium Suite</h2>
                                <span className="badge bg-emerald-100 text-emerald-800">Qualification Stage</span>
                            </div>
                            <div className="p-4">
                                <div className="grid grid-cols-3 gap-4 mb-6">
                                    <div className="text-center p-4 bg-emerald-50 rounded-lg border border-emerald-200">
                                        <p className="text-3xl font-bold text-emerald-600">‚Ç¨48,000</p>
                                        <p className="text-sm text-slate-500">Annual Value</p>
                                    </div>
                                    <div className="text-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                                        <p className="text-3xl font-bold sf-blue-text">127</p>
                                        <p className="text-sm text-slate-500">Practitioners</p>
                                    </div>
                                    <div className="text-center p-4 bg-amber-50 rounded-lg border border-amber-200">
                                        <p className="text-3xl font-bold text-amber-600">75%</p>
                                        <p className="text-sm text-slate-500">Win Probability</p>
                                    </div>
                                </div>
                                
                                <hr className="my-4" />
                                
                                <div className="space-y-3">
                                    <h3 className="font-semibold text-slate-700">üìÖ Opportunity Timeline</h3>
                                    <div className="space-y-3 ml-2">
                                        {[
                                            { color: 'bg-purple-500', text: 'Support Case CS-12848 received', time: 'Today, 10:10 AM' },
                                            { color: 'bg-emerald-500', text: 'AI classified as Expansion Opportunity (94% confidence)', time: 'Today, 10:10 AM - Automated' },
                                            { color: 'bg-blue-500', text: 'Lead LD-5520 created and assigned to Mar√≠a Gonz√°lez', time: 'Today, 10:15 AM - Auto-routing' },
                                            { color: 'bg-indigo-500', text: 'Lead qualified and converted to Opportunity', time: 'Today, 11:30 AM - Mar√≠a Gonz√°lez' },
                                            { color: 'bg-amber-500', text: 'Discovery call scheduled', time: 'Tomorrow, 3:00 PM - Pending' },
                                        ].map((item, i) => (
                                            <div key={i} className="flex items-start gap-3">
                                                <div className={`w-3 h-3 rounded-full ${item.color} mt-1.5`}></div>
                                                <div>
                                                    <p className="text-sm font-medium text-slate-700">{item.text}</p>
                                                    <p className="text-xs text-slate-500">{item.time}</p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-blue-50 rounded-lg shadow-sm border border-blue-200">
                            <div className="px-4 py-3 border-b border-blue-200">
                                <h3 className="text-sm font-semibold text-blue-800 flex items-center gap-2">
                                    <span>üìã</span> Original Support Case Context
                                </h3>
                            </div>
                            <div className="p-4">
                                <p className="text-sm text-slate-700 mb-2">
                                    <strong>Case CS-12848:</strong> Customer inquired about telemedicine features for 127 practitioners
                                </p>
                                <p className="text-sm text-slate-600">
                                    AI Classification: Expansion Opportunity (94% confidence) | Intent: Enterprise Video Solution
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    {/* Sidebar */}
                    <div className="space-y-4">
                        <div className="bg-white rounded-lg shadow-sm border">
                            <div className="px-4 py-3 border-b bg-slate-50">
                                <h3 className="text-sm font-semibold text-slate-700">Opportunity Details</h3>
                            </div>
                            <div className="p-4 space-y-3 text-sm">
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Owner</span>
                                    <span className="font-medium">Mar√≠a Gonz√°lez</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Stage</span>
                                    <span>Qualification</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Close Date</span>
                                    <span>March 15, 2026</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Product</span>
                                    <span>Premium Suite Enterprise</span>
                                </div>
                                <hr />
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Lead Source</span>
                                    <span className="badge bg-purple-100 text-purple-800 text-xs">Support Signal</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Original Lead</span>
                                    <span className="sf-blue-text font-medium">LD-5520</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-slate-500">Original Case</span>
                                    <span className="sf-blue-text font-medium">CS-12848</span>
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-sm border">
                            <div className="px-4 py-3 border-b bg-slate-50">
                                <h3 className="text-sm font-semibold text-slate-700">‚úÖ Next Steps</h3>
                            </div>
                            <div className="p-4 space-y-2">
                                {[
                                    { text: 'Discovery call scheduled', done: false, highlight: true },
                                    { text: 'Prepare custom demo', done: false, highlight: false },
                                    { text: 'Send pricing proposal', done: false, highlight: false }
                                ].map((step, i) => (
                                    <div key={i} className={`flex items-center gap-2 p-2 ${step.highlight ? 'bg-amber-50 border border-amber-200' : 'bg-slate-50'} rounded`}>
                                        <input type="checkbox" className="rounded" checked={step.done} readOnly />
                                        <span className="text-sm">{step.text}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        <div className="bg-emerald-50 rounded-lg shadow-sm border border-emerald-200 p-4">
                            <div className="flex items-center gap-2 mb-2">
                                <span className="text-emerald-600">üéØ</span>
                                <span className="font-semibold text-emerald-800">Pipeline Impact</span>
                            </div>
                            <p className="text-sm text-emerald-700">
                                This opportunity was generated automatically from a support ticket, demonstrating the value of the AI-powered expansion pipeline.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        );

        // Help Dialog
        const HelpDialog = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={onClose}>
                    <div className="bg-white rounded-lg shadow-xl w-[500px] max-w-full m-4" onClick={e => e.stopPropagation()}>
                        <div className="px-4 py-3 border-b flex items-center justify-between">
                            <h3 className="font-semibold text-lg">üó∫Ô∏è Navigation Guide</h3>
                            <button onClick={onClose} className="text-slate-400 hover:text-slate-600 text-xl">‚úï</button>
                        </div>
                        <div className="p-4 space-y-4 text-sm">
                            <div className="p-3 bg-slate-50 rounded-lg">
                                <p className="font-semibold mb-1">üìã Cases (Main Queue)</p>
                                <p className="text-slate-600">View all support tickets with AI classification and recommended next steps.</p>
                            </div>
                            <div className="p-3 bg-emerald-50 rounded-lg border border-emerald-200">
                                <p className="font-semibold mb-1 text-emerald-800">üè™ CS-12847 - Small Clinic Flow</p>
                                <p className="text-slate-600">See automated soft-sell response for smaller accounts.</p>
                            </div>
                            <div className="p-3 bg-purple-50 rounded-lg border border-purple-200">
                                <p className="font-semibold mb-1 text-purple-800">üè¢ CS-12848 - Enterprise Flow</p>
                                <p className="text-slate-600">See Sales handoff flow ‚Üí Lead creation ‚Üí Opportunity conversion.</p>
                            </div>
                            <div className="p-3 bg-blue-50 rounded-lg border border-blue-200">
                                <p className="font-semibold mb-1 text-blue-800">üìà Leads</p>
                                <p className="text-slate-600">View all leads generated from support signals. Only LD-5520 is converted.</p>
                            </div>
                            <div className="p-3 bg-amber-50 rounded-lg border border-amber-200">
                                <p className="font-semibold mb-1 text-amber-800">üí∞ Opportunities</p>
                                <p className="text-slate-600">View pipeline with all opportunities from support signals.</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App
        const App = () => {
            const [currentView, setCurrentView] = useState('cases');
            const [helpOpen, setHelpOpen] = useState(false);
            
            const handleSelectCase = (size) => {
                setCurrentView(size === 'small' ? 'case-small' : 'case-enterprise');
            };
            
            return (
                <div className="min-h-screen bg-slate-100">
                    <SalesforceHeader currentView={currentView} setCurrentView={setCurrentView} />
                    
                    <main>
                        {currentView === 'cases' && <CasesList onSelectCase={handleSelectCase} />}
                        {currentView === 'case-small' && (
                            <CaseDetail 
                                size="small" 
                                onBack={() => setCurrentView('cases')} 
                                onViewLead={() => setCurrentView('leads')} 
                            />
                        )}
                        {currentView === 'case-enterprise' && (
                            <CaseDetail 
                                size="enterprise" 
                                onBack={() => setCurrentView('cases')} 
                                onViewLead={() => setCurrentView('lead-detail')} 
                            />
                        )}
                        {currentView === 'leads' && (
                            <LeadsList 
                                onSelectLead={() => setCurrentView('lead-detail')} 
                                onViewOpportunity={() => setCurrentView('opportunity-detail')} 
                            />
                        )}
                        {currentView === 'lead-detail' && (
                            <LeadDetail 
                                onBack={() => setCurrentView('leads')} 
                                onViewOpportunity={() => setCurrentView('opportunity-detail')} 
                            />
                        )}
                        {currentView === 'opportunities' && (
                            <OpportunitiesList 
                                onSelectOpportunity={() => setCurrentView('opportunity-detail')} 
                            />
                        )}
                        {currentView === 'opportunity-detail' && (
                            <OpportunityDetail onBack={() => setCurrentView('opportunities')} />
                        )}
                    </main>
                    
                    {/* Help Button */}
                    <button 
                        onClick={() => setHelpOpen(true)}
                        className="fixed bottom-6 right-6 w-14 h-14 sf-blue text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors flex items-center justify-center text-xl font-bold"
                    >
                        ?
                    </button>
                    
                    <HelpDialog isOpen={helpOpen} onClose={() => setHelpOpen(false)} />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
